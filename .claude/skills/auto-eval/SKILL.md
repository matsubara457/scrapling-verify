---
name: auto-eval
description: タスク完了後に品質スコア+改善アクションを自動算出する。/solve,/done完了後に自動発火。
---

## 発火条件（必ず守る）
以下の**直後**に自動発火:
- `/solve` 完了後（Phase 10 の報告直後）
- `/done` 完了後（Phase 6 の報告直後）
- 大きな実装作業の区切り（5ファイル超の変更をコミットした後）

## 手順（20秒以内）
1. `git diff origin/main..HEAD --stat` で変更規模を把握
2. quality-scorer エージェントを起動（haiku、高速）
3. スコアを受け取り、完了報告に追記:
   ```
   📊 Quality: 85/100 (型:18 エラー:20 パターン:17 テスト:15 安全:15)
   ```
4. スコアが70未満の場合 → ACTION_NEEDED を報告
5. スコアが90以上 → 「excellent」と報告
6. 前回スコアとの比較（TREND）を表示

## トークン効率
- quality-scorer は haiku で起動（低コスト）
- 結果は1行に圧縮して報告
- 70以上で問題なしの場合、詳細は省略
