---
name: test
description: 指定したモジュールのテストを自動生成・実行する
argument-hint: "[ファイルパス or モジュール名]"
disable-model-invocation: true
allowed-tools: Bash(pnpm *), Bash(npx *)
---

## 手順

### 1. 対象特定
ファイルパス → そのファイル、モジュール名 → 関連ファイル一式

### 2. 既存テスト確認
`backend/src/__tests__/` のパターン把握。既存テストあれば不足分のみ追加。

### 3. テスト生成
- バリデーション: Zodスキーマの正常系・異常系
- サービス: ビジネスロジック単体テスト（リポジトリモック）
- 統合: APIエンドポイントE2E
- 設計: 正常系→境界値→異常系、独立、日本語名「〜の場合、〜すること」、AAAパターン

### 4. 実行・修正
`pnpm test` — 失敗時は自力修正（最大3回）

### 5. 報告
テスト数 + 対象の関数/エンドポイント一覧
